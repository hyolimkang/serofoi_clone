<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function fits the specified model foi_model to the serological survey data serodata 
by means of the sampling method. The function determines whether the corresponding stan model 
object needs to be compiled by means of the function save_or_load_model."><title>Function that fits the selected model to the specified seroprevalence survey data — fit_seromodel • serofoi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function that fits the selected model to the specified seroprevalence survey data — fit_seromodel"><meta property="og:description" content="This function fits the specified model foi_model to the serological survey data serodata 
by means of the sampling method. The function determines whether the corresponding stan model 
object needs to be compiled by means of the function save_or_load_model."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">serofoi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/serofoi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/simulated_data.html">Simulated data</a>
    <a class="dropdown-item" href="../articles/use_cases.html">Use cases</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Function that fits the selected model to the specified seroprevalence survey data</h1>
      
      <div class="d-none name"><code>fit_seromodel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function fits the specified model <code>foi_model</code> to the serological survey data <code>serodata</code> 
by means of the <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a> method. The function determines whether the corresponding stan model 
object needs to be compiled by means of the function <a href="save_or_load_model.html">save_or_load_model</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fit_seromodel</span><span class="op">(</span></span>
<span>  <span class="va">serodata</span>,</span>
<span>  <span class="va">foi_model</span>,</span>
<span>  n_iters <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  n_thin <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  delta <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  m_treed <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  decades <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>serodata</dt>
<dd><p>A data frame containing the data from a seroprevalence survey. For further details refer to <a href="run_seromodel.html">run_seromodel</a>.</p></dd>


<dt>foi_model</dt>
<dd><p>Name of the selected model. Current version provides three options:</p><dl><dt><code>"constant"</code></dt>
<dd><p>Runs a constant model</p></dd>

<dt><code>"tv_normal"</code></dt>
<dd><p>Runs a normal model</p></dd>

<dt><code>"tv_normal_log"</code></dt>
<dd><p>Runs a normal logarithmic model</p></dd>


</dl></dd>


<dt>n_iters</dt>
<dd><p>Number of interations for eah chain including the warmup. <code>iter</code> in <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a>.</p></dd>


<dt>n_thin</dt>
<dd><p>Positive integer specifying the period for saving samples. <code>thin</code> in <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a>.</p></dd>


<dt>delta</dt>
<dd><p>Real number between 0 and 1 that represents the target average acceptance probability.
Increasing the value of <code>delta</code> will result in a smaller step size and fewer divergences.
For further details refer to the <code>control</code> parameter in <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a> or <a href="https://mc-stan.org/rstanarm/reference/adapt_delta.html" class="external-link">here</a>.</p></dd>


<dt>m_treed</dt>
<dd><p>Maximum tree depth for the binary tree used in the NUTS stan sampler. For further details refer to the <code>control</code> parameter in <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a>.</p></dd>


<dt>decades</dt>
<dd><p>Number of decades covered by the survey data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>seromodel_object</code>. An object containing relevant information about the implementation of the model. It contains the following:</p><table class="table table"><tr><td><code>fit</code></td><td><code>stanfit</code> object returned by the function <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a></td></tr><tr><td></td><td></td></tr><tr><td><code>serodata</code></td><td>A data frame containing the data from a seroprevalence survey. For further details refer to <a href="run_seromodel.html">run_seromodel</a>.</td></tr><tr><td></td><td></td></tr><tr><td><code>stan_data</code></td><td>List containing <code>Nobs</code>, <code>Npos</code>, <code>Ntotal</code>, <code>Age</code>, <code>Ymax</code>, <code>AgeExpoMatrix</code> and <code>NDecades</code>.
This object is used as an input for the <a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">sampling</a> function</td></tr><tr><td></td><td></td></tr><tr><td><code>exposure_years</code></td><td>Integer atomic vector containing the actual exposure years (1946, ..., 2007 e.g.)</td></tr><tr><td></td><td></td></tr><tr><td><code>exposure_ages</code></td><td>Integer atomic vector containing the numeration of the exposure ages.</td></tr><tr><td></td><td></td></tr><tr><td><code>n_iters</code></td><td>Number of interations for eah chain including the warmup.</td></tr><tr><td></td><td></td></tr><tr><td><code>n_thin</code></td><td>Positive integer specifying the period for saving samples.</td></tr><tr><td></td><td></td></tr><tr><td><code>n_warmup</code></td><td>Number of warm up iterations. Set by default as n_iters/2.</td></tr><tr><td></td><td></td></tr><tr><td><code>foi_model</code></td><td>The name of the model</td></tr><tr><td></td><td></td></tr><tr><td><code>delta</code></td><td>Real number between 0 and 1 that represents the target average acceptance probability.</td></tr><tr><td></td><td></td></tr><tr><td><code>m_treed</code></td><td>Maximum tree depth for the binary tree used in the NUTS stan sampler.</td></tr><tr><td></td><td></td></tr><tr><td><code>loo_fit</code></td><td>Efficient approximate leave-one-out cross-validation. Refer to <a href="https://mc-stan.org/loo/reference/loo.html" class="external-link">loo</a> for further details.</td></tr><tr><td></td><td></td></tr><tr><td><code>foi_cent_est</code></td><td>A data fram e containing <code>year</code> (corresponding to <code>exposure_years</code>), <code>lower</code>, <code>upper</code>, and <code>medianv</code></td></tr><tr><td></td><td></td></tr><tr><td><code>foi_post_s</code></td><td>Sample n rows from a table. Refer to <a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_n</a> for further details.</td></tr><tr><td></td><td></td></tr><tr><td><code>model_summary</code></td><td>A data fram containing the summary of the model. Refer to <a href="extract_seromodel_summary.html">extract_seromodel_summary</a> for further details.</td></tr><tr><td></td><td></td></tr></table></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"serodata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">serodata</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_serodata.html">prepare_serodata</a></span><span class="op">(</span><span class="va">serodata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">seromodel_fit</span> <span class="op">&lt;-</span> <span class="fu">fit_seromodel</span><span class="op">(</span>serodata <span class="op">=</span> <span class="va">serodata</span>,</span></span>
<span class="r-in"><span>                               foi_model <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Zulma M. Cucunubá, Nicolás Torres, Ben Lambert, Pierre Nouvellet.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

