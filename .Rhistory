library(serofoi)
data("serodata")
library(dplyr)
serodata <- serodata %>% filter(-c("year_init", "year_end"))
serodata <- serodata %>% select(-c("year_init", "year_end"))
save(serodata, file = "data/serodata.RData")
?saveRDS
saveRDS(serodata, "data/serodata.RDS")
devtools::document()
remotes::install_github("TRACE-LAC/serofoi", ref = "dev-datasets")
library(serofoi)
data("serodata")
colnames(serodata)
library(dplyr)
data_test <- serodata %>% prepare_serodata()
model_constant <- run_seromodel(data_test, foi_model = "constant")
data("chagas2012")
serodata <- serodata %>% select(-c("year_init", "year_end"))
chagas2012 <- chagas2012 %>% select(-c("year_init", "year_end"))
save(chagas2012, file = "data/chagas2012.RData")
saveRDS(chagas2012, "data/chagas2012.RDS")
devtools::document()
data("chik2015")
data("chik2015")
chik2015 <- chik2015 %>% select(-c("year_init", "year_end"))
save(chik2015, file = "data/chik2015.RData")
saveRDS(chik2015, "data/chik2015.RDS")
devtools::document()
data("veev2012")
veev2012 <- veev2012 %>% select(-c("year_init", "year_end"))
save(veev2012, file = "data/veev2012.RData")
saveRDS(veev2012, "data/veev2012.RDS")
devtools::document()
devtools::document()
library(serofoi)
data("serodata")
data_test <- prepare_serodata(serodata)
model_constant <- run_seromodel(serodata = data_test,
foi_model = "constant",
n_iters = 500,
n_thin = 2)
plot_seromodel(model_constant, size_text = 6)
plot_seromodel(model_constant, size_text = 6, max_lambda = 0.8)
plot_seromodel(model_constant, size_text = 6, lambda_sim =  = 0.8)
plot_seromodel(model_constant, size_text = 6, lambda_sim = 0.8)
plot_seromodel(model_constant, size_text = 6)
model_constant <- run_seromodel(serodata = data_test,
foi_model = "constant",
n_iters = 1500,
n_thin = 2)
model_constant <- run_seromodel(serodata = data_test,
foi_model = "constant",
n_iters = 750,
n_thin = 2)
model_constant <- run_seromodel(serodata = data_test,
foi_model = "constant",
n_iters = 800,
n_thin = 2)
plot_seromodel(model_constant)
plot_seromodel(model_constant, size_text = 6)
model_constant_plot <- plot_seromodel(model_constant, size_text = 6)
devtools::test_active_file()
simdata_rds <- readRDS("extdata/simdata_foiD_n05_group.RDS")
simdata_rds <- readRDS("/tests/testthat/extdata/simdata_foiD_n05_group.RDS")
simdata_rds <- readRDS("./tests/testthat/extdata/simdata_foiD_n05_group.RDS")
simdata <- simdata_rds$serodata_sim %>% prepare_serodata()
foi_sim <- simdata_rds$foi_sim
#----- Run models
models_to_run <- c("constant",
"tv_normal",
"tv_normal_log")
models_list <- lapply(models_to_run,
run_seromodel,
serodata = simdata,
n_iters = 1000)
model_constant <- models_list[[1]]
model_constant$exposure_years
length(model_constant$exposure_years)
model_constant$foi_cent_est
devtools::test_active_file()
devtools::test_active_file()
devtools::test_active_file()
#----- Read and prepare data
data_test_path <- testthat::test_path(
"extdata", "simdata_foiD_n05_group.RDS"
)
simdata_rds <- readRDS(data_test_path)
simdata <- simdata_rds$serodata_sim %>% prepare_serodata()
foi_sim <- simdata_rds$foi_sim
foi_sim[-5:-1]
length(foi_sim[-5:-1])
length(foi_sim[-3:-1])
length(foi_sim[47:-1])
length(foi_sim[-47:1])
length(foi_sim[-47:])
length(foi_sim[-47:-1])
devtools::test_active_file()
#----- Read and prepare data
data_test_path <- testthat::test_path(
"extdata", "simdata_foiD_n05_group.RDS"
)
simdata_rds <- readRDS(data_test_path)
simdata <- simdata_rds$serodata_sim %>% prepare_serodata()
foi_sim <- simdata_rds$foi_sim
foi_sim[47-50:-1]
foi_sim[-3:-1]
devtools::test_active_file()
devtools::test_active_file()
devtools::test_active_file()
devtools::test_active_file()
devtools::test_active_file()
data_test_path <- testthat::test_path(
"extdata", "simdata_foiD_n05_group.RDS"
)
simdata_rds <- readRDS(data_test_path)
serodata_simD <- simdata_rds$serodata_sim
save(serodata_simD, file = "data/serodata_simD.RData")
devtools::document()
no_transm <- 0.0000000001
big_outbreak   <- 1.5
foiD <- c(rep(no_transm, 32), rep(big_outbreak, 3), rep(no_transm, 15)) # 1 epidemics
plot(foiD)
devtools::test_active_file()
devtools::test_active_file()
devtools::test_active_file()
devtools::document()
